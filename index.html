<!DOCTYPE html>
  <html>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"> </script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <head>
    <title>Architectural Style Classifier</title>
    <style>
        * {
            font-size:30px;
        }
    </style>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  </head>
<body>
  <input id="image-selector" type="file">
  <button id="predict-button">Predict</button>
  <p style="font-weight:bold">Predictions</p>
  <p>Baroque:<span id="Baroque-prediction"></span></p>
  <p>Classical/NeoClassical:<span id="NeoClassical-prediction"></span></p>
  <p>Gothic:<span id="Gothic-prediction"></span></p>
  <p>Modern:<span id="Modern-prediction"></span></p>
  <p>Victorian:<span id="Victorian-prediction"></span></p>
  <img id="selected-image" src=""/>

</body>
<script type="text/javascript">
  document.getElementById("predict-button").onclick = async function() {run()};
  async function run() {
  let reader = new FileReader();
  let dataURL = reader.result;
  document.getElementById("selected-image").src=dataURL;
  const image = tf.browser.fromPixels(selected-image);
  const resized_image = tf.image.resizeBilinear(image, [300,300]).toFloat();
  const batchedImage = resized_image.expandDims(0);
  const MODEL_URL = 'web_model/model.json';
  const model = await tf.loadGraphModel(MODEL_URL);
  const result = model.predict(batchedImage);
  result.print();

}

</script>
</html>
