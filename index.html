<html>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"> </script>

</script>
<head></head>
<body>
<p>Architectural Style Classifier 1.1</p>

<img id="imgcanvas" width="300" height="300" src='testimage1.jpg'></img>

</body>
<script type="text/javascript">
async function run(){

  const image = tf.browser.fromPixels(imgcanvas);
  const resized_image =
       tf.image.resizeBilinear(image, [9,9]).toFloat();
  const offset = tf.scalar(255.0);
  const normalized = tf.scalar(512.0).sub(resized_image.div(offset));
  const batchedImage = normalized.expandDims(0);
  const reshapedImage = tf.tensor4d(batchedImage,[-1, 9, 9, 512])
  const MODEL_URL = 'web_model/model.json';
  const model = await tf.loadGraphModel(MODEL_URL);
  const result = model.predict(reshapedImage);
  result.print();
}
run();
</script>
</html>
